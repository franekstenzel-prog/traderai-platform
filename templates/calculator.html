{% extends "layout_app.html" %}
{% set page_title = "Calculator" %}
{% set active = "calculator" %}

{% block app_content %}
  <div class="grid2">
    <div class="card">
      <div class="card__title">Position sizing</div>
      <div class="muted" style="margin-bottom:12px">Enter your parameters and get risk amount, stop distance, and position size.</div>

      <form class="form" action="{{ url_for('calculator') }}" method="post">
        <div class="grid2">
          <label class="field">
            <span class="field__label">Capital</span>
            <input name="capital" value="{{ defaults.capital }}" inputmode="decimal" required />
          </label>
          <label class="field">
            <span class="field__label">Risk %</span>
            <input name="risk_pct" value="{{ defaults.risk_pct }}" inputmode="decimal" required />
          </label>
        </div>

        <div class="grid3" style="margin-top:10px">
          <label class="field">
            <span class="field__label">Entry</span>
            <input name="entry" value="{{ defaults.entry }}" inputmode="decimal" required />
          </label>
          <label class="field">
            <span class="field__label">Stop</span>
            <input name="stop" value="{{ defaults.stop }}" inputmode="decimal" required />
          </label>
          <label class="field">
            <span class="field__label">Take profit (optional)</span>
            <input name="tp" value="{{ defaults.tp }}" inputmode="decimal" />
          </label>
        </div>

        <button class="btn btn--primary" type="submit">Calculate</button>
      </form>
    </div>

    <div class="card">
      <div class="card__title">Results</div>
      {% if calc %}
        <div class="list" style="margin-top:10px">
          <div class="list__row"><span class="muted">Risk amount</span><span class="mono">{{ calc.risk_amount }}</span></div>
          <div class="list__row"><span class="muted">Stop distance</span><span class="mono">{{ calc.stop_distance }}</span></div>
          <div class="list__row"><span class="muted">Position size (units)</span><span class="mono">{{ calc.units }}</span></div>
          <div class="list__row"><span class="muted">Notional</span><span class="mono">{{ calc.notional }}</span></div>
          {% if calc.rr is not none %}
            <div class="list__row"><span class="muted">Risk/Reward (RR)</span><span class="mono">{{ calc.rr }}</span></div>
          {% endif %}
        </div>

        <div class="muted small" style="margin-top:10px">
          Notes: This is a sizing helper. It does not consider fees, slippage, or liquidation risk.
        </div>
      {% else %}
        <div class="muted">Fill the form to calculate.</div>
      {% endif %}
    </div>
  </div>
{% endblock %}
